<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    
    h1 {color: orchid !important;}
    hr {margin-right: 25%;}
    .option { font-size: 12px  ! important;}
    #submit { margin-left: 43%; }
    #name {width:50%;}
    #photo {width: 50%;}
    .jumbotron { width: 70% ! important; background-color: rgb(229, 243, 101) ! important; border-style: solid; border-width:2px; border-color:orchid}
    .container { margin-left: 10% ! important;}
    .footer {margin-left: 25% ! important;}

    </style>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

</head>

<body>

<div class= "jumbotron"> 
    <div class="container">

    <h1>
            <i class="far fa-smile-wink fa-lg" aria-hidden = "true"></i>
            Friendly
    </h1>
    <hr>
    <h4 style="color:gray">Answer some questions...  and find your new bestie!</h4>
    <!-- <h4 style="color:gray">
        Find your bestie!
    </h4> -->
    <br>
    <h2 style= "color: orchid">Survey Questions</h2>
    <hr>
    
    <h3 style="color:orchid">
        <strong>About You</strong>
    </h3>
        <h5>Name (required)</h5>
        <input type = "text" id = "name" class = "form-control" required>  

        <h5> Link to Photo Image (required)</h5>
        <input type = "text" id = "photo" class= "form-control" required>
    <hr>
    <h4> 
        <strong>Question 1</strong>
    </h4>
        <h5> Your mind is always buzzing with unexplored ideas and plans.</h5>
        <select class="chosen-select" id = "q1" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>     
    <br>
    <h4>
        <strong>Question 2</strong>
    </h4>
        <h5> Generally speaking, you rely more on your experience than your imagination.</h5>
        <select class="chosen-select" id = "q2" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        <strong>Question 3</strong>
    </h4>
        <h5> You find it easy to stay relaxed and focued even when there is some pressure.</h5>
        <select class="chosen-select" id = "q3" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        <strong>Question 4</strong>
    </h4>
        <h5> You rarely do something just out of sheer curiosity.</h5>
        <select class="chosen-select" id = "q4" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        <strong>Question 5</strong>
    </h4>
        <h5> People rarely upset you.</h5>
        <select class="chosen-select" id = "q5" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        <strong>Question 6</strong>
    </h4>
        <h5> It is often difficult for you to relate to other people.</h5>
        <select class="chosen-select" id = "q6"><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>      
        <strong>Question 7</strong>
    </h4>
        <h5>In a discussion, truth should be more important than people's sensitivities. </h5>
        <select class="chosen-select" id = "q7"><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        <strong>Question 8</strong>
    </h4>
        <h5> You rarely get carried away by fantasies and ideas. </h5>
        <select class="chosen-select" id = "q8" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
        
        <strong>Question 9</strong>
    </h4>
        <h5> You think that everyone's view should be respected regardless of whether they are supported by facts or not.</h5>
        <select class="chosen-select" id = "q9" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>
    <br>
    <h4>
       
        <strong>Question 10</strong>
    </h4>
        <h5> You feel more energetic after spending time with a group of people.</h5>
        <select class="chosen-select" id = "q10" ><option value="1">1 (strongly disagree)</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5 (strongly agree)</option></select>
        <div class= "chosen-container chosen-container-single" style="width: 155px;" title id = "q1_chosen"> </div>                                                                                                                                                                                                                                                                                                                                                             
</div>

<br>

        <button type="submit" class="btn btn-primary btn-lg" id="submit">
        <i class= "fa fa-check-circle" aria-hidden="true"></i>  Submit
    </button>
<br> 
<br>
<footer class="footer">
    <div class="container">
          <p>
            <a href= "/api/friends">API Friends List</a> |
            <a href="https://github.com/DaleP1988/Friend-Finder---Node-and-Express-Servers.git">GitHub Repo</a>
    </div>
</footer>
   

   <div id="results-modal" class="modal fade" role="dialog"> 
        <div class="modal-dialog">
            <div class="modal-content">
        <!--MODAL CONTENT-->
             <div class="modal-header">
                 <button type="button" class="close" data-dismiss="modal">X</button>
                 <h2 class="modal-title"><strong>This one has Bestie Potential!</strong>
                 </h2>
            </div>
            <div class="modal-body">
                <!-- <h2 id="match-name"></h2>
                <img id="match-img"  alt=""> -->
             </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Try Again!</button>
            </div>
        </div>
    </div>

    
  
</div>

<script type= "text/javascript">

//this code should determine how data gets in from the server --- check tables.html
//do an AJAX call to get the data from the friends api

//form inputs
// $(".chosen-select").val("");
// $(document).ready(function() {

    // $('select').material_select();
   
$("#results-modal").hide(); //hiding the div for the modal. avoiding the gray background.

$("#submit").on("click", function(event) {
    event.preventDefault();
    var valid = true;
    $(".form-control").each(function(){
        if($(this).text() == "" ){
            alert("Please fill all fields!");
            valid = false;
        }
    });
    if(!valid){
        return;
    }



//grab the form elements

    var userData = {
        name: $("#name").val(),
        photo: $("#photo").val(),
        scores: [
            ($("#q1").val()),
            ($("#q2").val()),
            ($("#q3").val()),
            ($("#q4").val()),
            ($("#q5").val()),
            ($("#q6").val()),
            ($("#q7").val()),
            ($("#q8").val()),
            ($("#q9").val()),
            ($("#q10").val())
        ]
        };  

    console.log(userData);

    //CHECK RESERVE.HTML
    // AJAX post the data to the friends API
    //using the jQuery .done function to deal with the asynchronicity
    $.post("/api/friends", userData, function (data) {

        // if(data) {
        alert("You are officially listed in Friendly! Let's findy you a new bestie!");
        console.log(data);
        // $("#match-name").html(data.name);
        // $("#match-img").attr("src", data.photo);
        // $("#results-modal").modal('open'

        $('.modal-body').empty();  //get rid of previous match. get the width of the modal.

        var header = $("<h2>").text("Meet: " + data.name);
        var img = $("<img>").attr("src", data.photo).attr("width", "300px");


        var newBestieInfo = $(".modal-body");
        newBestieInfo.append(header).append(img);

        $('.modal').modal({
            dismissible: false,
            // Modal can be dismissed by clicking outside of the modal
            // opacity: .5, // Opacity of modal background
            // inDuration: 300, // Transition in duration
            // outDuration: 200, // Transition out duration
            // startingTop: '4%', // Starting top style attribute
            // endingTop: '10%' // Ending top style attribute
        }).show();  //hide until data is available
    });

});

  



   //server code changes, restart server!!!!!!!



//Grab result from AJAX post to display best match name and photo
       
//display modal with best match

  

//run the best match function
// <!-- 
// findBestMatch();

//   -->


</script>
</body>
</html>